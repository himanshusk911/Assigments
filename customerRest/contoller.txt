import java.util.Arrays;
import java.util.List;

import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;

@Controller
public class CustomerController {
	private List<Customer> customers = Arrays.asList(
			new Customer("c1","ram","India"),
			new Customer("c2","Arjun","USA"),
			new Customer("c3","Krishna","Uk")
			);
	@RequestMapping(value="/customers", method=RequestMethod.GET)		
	public List<Customer> getAllCustomers(){
		return customers;
	}
	@RequestMapping(value="/customers/{id}",method=RequestMethod.GET)
	public Customer getCustomer(@PathVariable String id) {
		return customers.stream().filter(t->t.getId().equals(id)).findFirst().get();
	}

	@RequestMapping(value="/customers",method=RequestMethod.POST)
	public void addCustomer(@RequestBody Customer customer ) {
		customers.add(customer);
		
	}

	@RequestMapping(value="/customers/{id}",method=RequestMethod.PUT)
	public void updateCustomer(@PathVariable String id,@RequestBody Customer customer) {
		for (int i=0;i<customers.size();i++) {
			Customer t = customers.get(i);
			if (t.getId().equals(id)) {
				customers.set(i,customer);
			}
		}
		
	}

	@RequestMapping(value="/customers/{id}",method=RequestMethod.DELETE)
	public void deleteCustomer(@PathVariable String id) {
		customers.removeIf(t->t.getId().equals(id));
	}


}


